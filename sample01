# 创建GUI窗口打开图像 并显示在窗口中
import cv2
from PIL import Image, ImageTk # 导入图像处理函数库
import tkinter as tk           # 导入GUI界面函数库
import numpy as np
# 创建窗口 设定大小并命名
window = tk.Tk()
window.title('图像显示界面')
window.geometry('600x500')

var = tk.StringVar()    # 这时文字变量储存器

def Show_Img():
    global img_png
    global label_Img
    Img = Image.open('C:\\users\\wangyuan\\Desktop\\fasterrcnn.jpg')
    img_png = ImageTk.PhotoImage(Img)
    label_Img = tk.Label(window, image=img_png)
    label_Img.pack()
def save_image(image, addr, num):
    address = addr + str(num) + '.jpg'
    cv2.imwrite(address, image)
def Show_Mv():
    global img_png
    global label_Img
    global videoCapture
    # 读取视频文件
    videoCapture = cv2.VideoCapture("C:\\Users\\wangyuan\\Desktop\\dayanta.mp4")
    # 读帧
    success, frame = videoCapture.read()
    image = Image.fromarray(cv2.cvtColor(frame, cv2.COLOR_BGR2RGB))
    img_png = ImageTk.PhotoImage(image)
    label_Img = tk.Label(window, image=img_png)
    label_Img.pack()
    print(success)
    while success:
        success, frame = videoCapture.read()
        print(success)
        image = Image.fromarray(cv2.cvtColor(frame, cv2.COLOR_BGR2RGB))
        img_png = ImageTk.PhotoImage(image)
        label_Img.image= img_png
        label_Img.update()
        cv2.waitKey(1000)

# 创建显示图像按钮
btn_Show = tk.Button(window,
    text='显示图像',      # 显示在按钮上的文字
    width=15, height=2,
    command=Show_Img)     # 点击按钮式执行的命令
btn_Show.pack()    # 按钮位置

# 创建显示图像按钮
btn_Show = tk.Button(window,
    text='逐个显示视频帧',      # 显示在按钮上的文字
    width=15, height=2,
    command=Show_Mv)     # 点击按钮式执行的命令
btn_Show.pack()    # 按钮位置
# 运行整体窗口
window.mainloop()
